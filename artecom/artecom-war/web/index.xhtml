<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Home</title>
    </h:head>
    <h:body>
        <ui:composition template="/template/layout.xhtml">
            <ui:define name="content">
                <c:set var="tab" value="shop" scope="request" />
                <div id="page-content-head">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras finibus
                        justo et sollicitudin malesuada. Suspendisse gravida volutpat nisl.
                        Nullam dui mauris, ultrices eu lorem at, molestie congue eros. Nullam
                        tempus efficitur maximus. <a href="#">Fusce</a> tristique, nisl ut maximus fermentum,
                        felis sapien commodo mi, id pellentesque erat metus non ipsum.
                        Praesent pretium elit non ante consectetur gravida. Integer in
                        tincidunt lacus, et <a href="#">dapibus magna</a>. Maecenas nisl sapien, molestie in
                        posuere ac, egestas non metus. Maecenas facilisis leo vitae dictum
                        pulvinar. Sed congue, dui in dignissim rutrum, neque dui pulvinar
                        odio, at dignissim nunc velit sit amet augue. Curabitur aliquet nulla
                        et pulvinar sollicitudin.</p>
                    <p><a href="#">Vestibulum sit amet mattis</a> nisi. Integer porta molestie purus.
                        Phasellus accumsan rutrum nibh. Pellentesque pellentesque enim at
                        lobortis tincidunt. Donec odio sapien, faucibus eu molestie vel,
                        tempus ac nisl. Curabitur maximus, erat ut dapibus efficitur, dui diam
                        vehicula eros, ac efficitur quam diam id risus. Nullam quis arcu nibh.
                        Nulla facilisi. Nam non sem ornare magna suscipit fringilla. Duis
                        interdum nisl et convallis volutpat. Pellentesque tempor elit
                        imperdiet cursus ultricies. Suspendisse quis nulla vehicula, facilisis
                        mi eget, condimentum sem.</p>
                </div>

                <div id="page-content-body">
                    
                    <p:outputPanel id="shop">
                        <p:outputPanel id="breadcrumb" styleClass="page-content-breadcrumb">
                            <c:choose>
                                <c:when test="#{shopView.currentCraft == null}">
                                    <h:outputText value="Categorie principale" />
                                </c:when>
                                <c:otherwise>
                                    <p:commandLink value="Categorie principale" actionListener="#{shopView.categoryClick}" update=":shop">
                                        <f:param name="catId" />
                                    </p:commandLink>
                                </c:otherwise>
                            </c:choose>
                            <ui:repeat value="#{shopView.breadcrumbs}" var="bread">
                                <h:outputText value=" / " />
                                <p:commandLink value="#{bread.name}" actionListener="#{shopView.categoryClick}" update=":shop">
                                    <f:param name="catId" value="#{bread.id}" />
                                </p:commandLink>
                            </ui:repeat>
                            <c:if test="#{shopView.currentCraft != null}">
                                <h:outputText value=" / " />
                                <h:outputText value="#{shopView.currentCraft.name}" />
                            </c:if>
                        </p:outputPanel>

                        <p:outputPanel id="categories" styleClass="page-content-category-list">
                            <ui:repeat var="cat" value="#{shopView.crafts}">
                                <div class="page-content-category-item">
                                    <div class="page-content-category-item-image">
                                        <h:graphicImage name="http://placehold.it/180x180" />
                                    </div>
                                    <div class="page-content-category-item-desc">
                                        <span>
                                            <h:form>
                                                <p:commandLink value="#{cat.name}" actionListener="#{shopView.categoryClick}" update=":shop">
                                                    <f:param name="catId" value="#{cat.id}" />
                                                </p:commandLink>
                                            </h:form>
                                        </span>
                                    </div>
                                </div>
                            </ui:repeat>
                        </p:outputPanel>
                        
                        <p:outputPanel id="products" styleClass="page-content-product-list">
                            <c:if test="#{not empty shopView.products}">
                                <ui:repeat var="prod" value="#{shopView.products}">
                                    <div class="page-content-product-item">
                                        <div class="page-content-product-item-image">
                                            <img src="http://placehold.it/100x100" />
                                        </div>
                                        <div class="page-content-product-item-desc">
                                            <span>
                                                <h:outputText value="#{prod.name} (#{prod.price} â‚¬)" />
                                            </span>
                                        </div>
                                    </div>
                                </ui:repeat>
                            </c:if>
                        </p:outputPanel>
                    </p:outputPanel>
                </div>
            </ui:define>
        </ui:composition>
    </h:body>
</html>

