<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Map</title>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    </h:head>
    <h:body>
        <ui:composition template="/template/layout.xhtml">
            <ui:define name="content">
                <c:set var="tab" value="map" scope="request" />
                <div id="page-content-head">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras finibus
                        justo et sollicitudin malesuada. Suspendisse gravida volutpat nisl.
                        Nullam dui mauris, ultrices eu lorem at, molestie congue eros. Nullam
                        tempus efficitur maximus. <a href="#">Fusce</a> tristique, nisl ut maximus fermentum,
                        felis sapien commodo mi, id pellentesque erat metus non ipsum.
                        Praesent pretium elit non ante consectetur gravida. Integer in
                        tincidunt lacus, et <a href="#">dapibus magna</a>. Maecenas nisl sapien, molestie in
                        posuere ac, egestas non metus. Maecenas facilisis leo vitae dictum
                        pulvinar. Sed congue, dui in dignissim rutrum, neque dui pulvinar
                        odio, at dignissim nunc velit sit amet augue. Curabitur aliquet nulla
                        et pulvinar sollicitudin.</p>
                    <p><a href="#">Vestibulum sit amet mattis</a> nisi. Integer porta molestie purus.
                        Phasellus accumsan rutrum nibh. Pellentesque pellentesque enim at
                        lobortis tincidunt. Donec odio sapien, faucibus eu molestie vel,
                        tempus ac nisl. Curabitur maximus, erat ut dapibus efficitur, dui diam
                        vehicula eros, ac efficitur quam diam id risus. Nullam quis arcu nibh.
                        Nulla facilisi. Nam non sem ornare magna suscipit fringilla. Duis
                        interdum nisl et convallis volutpat. Pellentesque tempor elit
                        imperdiet cursus ultricies. Suspendisse quis nulla vehicula, facilisis
                        mi eget, condimentum sem.</p>
                </div>

                <div id="page-content-body">
                    <p:gmap id="map-container" style="height:800px" center="47.07012182383309, 2.3796387389302254" fitBounds="true" zoom="13" type="terrain" model="#{mapView.mapModel}">
                        <p:ajax event="overlaySelect" listener="#{mapView.onMarkerSelect}" />

                        <p:gmapInfoWindow id="infoWindow">
                            <p:outputPanel styleClass="map-tooltip">
                                <c:choose>
                                    <c:when test="#{mapView.marker.site.type == 'STORE'}">
                                        <h:outputText value="Point de vente" />
                                    </c:when>
                                    <c:when test="#{mapView.marker.site.type == 'WORKSHOP'}">
                                        <h:outputText value="Atelier" />
                                    </c:when>
                                </c:choose>
                                <h:outputText value=" de " />
                                <h:outputLink value="#">#{mapView.marker.site.craftsman.firstName} #{mapView.marker.site.craftsman.lastName}</h:outputLink>
                                <br />
                                <h:outputText value="Artisanats : " />
                                <ui:repeat value="#{mapView.marker.site.crafts}" var="craft">
                                    <h:outputText value=" #{craft.name} ," />
                                </ui:repeat>
                            </p:outputPanel>
                        </p:gmapInfoWindow>
                    </p:gmap>
                </div>
            </ui:define>
        </ui:composition>
    </h:body>
</html>

